<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>JUCE: TemporaryFile Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">JUCE
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">TemporaryFile Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="TemporaryFile" -->
<p>Manages a temporary file, which will be deleted when this object is deleted.  
 <a href="classTemporaryFile.html#details">More...</a></p>

<p><a href="classTemporaryFile-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTemporaryFile.html#af04f4ef2ea1bee0b20cdb4c072442e8d">OptionFlags</a> { <a class="el" href="classTemporaryFile.html#af04f4ef2ea1bee0b20cdb4c072442e8da5a8f2dba38db83ba22b75362598feaf6">useHiddenFile</a> =  1, 
<a class="el" href="classTemporaryFile.html#af04f4ef2ea1bee0b20cdb4c072442e8da756fae13005d397744383ecd04539914">putNumbersInBrackets</a> =  2
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTemporaryFile.html#a4f70f8859f286ba4c934c6a06e4e9f09">TemporaryFile</a> (const <a class="el" href="classString.html">String</a> &amp;suffix=<a class="el" href="classString.html#afd02116a5571fcc8bc1e6fdabe132a85">String::empty</a>, int optionFlags=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a randomly-named temporary file in the default temp directory.  <a href="#a4f70f8859f286ba4c934c6a06e4e9f09"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTemporaryFile.html#a7039b78139b7d1c0661a4e1307929127">TemporaryFile</a> (const <a class="el" href="classFile.html">File</a> &amp;targetFile, int optionFlags=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a temporary file in the same directory as a specified file.  <a href="#a7039b78139b7d1c0661a4e1307929127"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTemporaryFile.html#a7a0f828343c95d3a7e81d6d3587ad116">~TemporaryFile</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a7a0f828343c95d3a7e81d6d3587ad116"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classFile.html">File</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTemporaryFile.html#a1a572896153a2dda306100603e039454">getFile</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the temporary file.  <a href="#a1a572896153a2dda306100603e039454"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classFile.html">File</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTemporaryFile.html#ae3c0550e3bf9fadc2964c44239563ab8">getTargetFile</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the target file that was specified in the constructor.  <a href="#ae3c0550e3bf9fadc2964c44239563ab8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTemporaryFile.html#aaf1c2513c6bd7b1ba343fe53cddd0fd0">overwriteTargetFileWithTemporary</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to move the temporary file to overwrite the target file that was specified in the constructor.  <a href="#aaf1c2513c6bd7b1ba343fe53cddd0fd0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTemporaryFile.html#a3a79444415eba12ba52fb9dc86d126a0">deleteTemporaryFile</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to delete the temporary file, if it exists.  <a href="#a3a79444415eba12ba52fb9dc86d126a0"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Manages a temporary file, which will be deleted when this object is deleted. </p>
<p>This object is intended to be used as a stack based object, using its scope to make sure the temporary file isn't left lying around.</p>
<p>For example:</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="classFile.html" title="Represents a local file or directory.">File</a> myTargetFile (<span class="stringliteral">&quot;~/myfile.txt&quot;</span>);

        <span class="comment">// this will choose a file called something like &quot;~/myfile_temp239348.txt&quot;</span>
        <span class="comment">// which definitely doesn&#39;t exist at the time the constructor is called.</span>
        <a class="code" href="classTemporaryFile.html" title="Manages a temporary file, which will be deleted when this object is deleted.">TemporaryFile</a> temp (myTargetFile);

        <span class="comment">// create a stream to the temporary file, and write some data to it...</span>
        <a class="code" href="classScopedPointer.html" title="This class holds a pointer which is automatically deleted when this object goes out of scope...">ScopedPointer &lt;FileOutputStream&gt;</a> out (temp.getFile().createOutputStream());

        <span class="keywordflow">if</span> (out != <span class="keyword">nullptr</span>)
        {
            out-&gt;write ( ...etc )
            out = <span class="keyword">nullptr</span>; <span class="comment">// (deletes the stream)</span>

            <span class="comment">// ..now we&#39;ve finished writing, this will rename the temp file to</span>
            <span class="comment">// make it replace the target file we specified above.</span>
            <span class="keywordtype">bool</span> succeeded = temp.overwriteTargetFileWithTemporary();
        }

        <span class="comment">// ..and even if something went wrong and our overwrite failed,</span>
        <span class="comment">// as the TemporaryFile object goes out of scope here, it&#39;ll make sure</span>
        <span class="comment">// that the temp file gets deleted.</span>
    }
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classFile.html" title="Represents a local file or directory.">File</a>, <a class="el" href="classFileOutputStream.html" title="An output stream that writes into a local file.">FileOutputStream</a> </dd></dl>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="af04f4ef2ea1bee0b20cdb4c072442e8d"></a><!-- doxytag: member="TemporaryFile::OptionFlags" ref="af04f4ef2ea1bee0b20cdb4c072442e8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classTemporaryFile.html#af04f4ef2ea1bee0b20cdb4c072442e8d">TemporaryFile::OptionFlags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="af04f4ef2ea1bee0b20cdb4c072442e8da5a8f2dba38db83ba22b75362598feaf6"></a><!-- doxytag: member="useHiddenFile" ref="af04f4ef2ea1bee0b20cdb4c072442e8da5a8f2dba38db83ba22b75362598feaf6" args="" -->useHiddenFile</em>&nbsp;</td><td>
<p>Indicates that the temporary file should be hidden - i.e. </p>
<p>its name should start with a dot. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af04f4ef2ea1bee0b20cdb4c072442e8da756fae13005d397744383ecd04539914"></a><!-- doxytag: member="putNumbersInBrackets" ref="af04f4ef2ea1bee0b20cdb4c072442e8da756fae13005d397744383ecd04539914" args="" -->putNumbersInBrackets</em>&nbsp;</td><td>
<p>Indicates that when numbers are appended to make sure the file is unique, they should go in brackets rather than just being appended (see <a class="el" href="classFile.html#ad02ceff2de4491ebd52869e43d9599e3" title="Chooses a filename for a sibling file to this one that doesn&#39;t already exist.">File::getNonexistentSibling()</a> ) </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4f70f8859f286ba4c934c6a06e4e9f09"></a><!-- doxytag: member="TemporaryFile::TemporaryFile" ref="a4f70f8859f286ba4c934c6a06e4e9f09" args="(const String &amp;suffix=String::empty, int optionFlags=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTemporaryFile.html#a4f70f8859f286ba4c934c6a06e4e9f09">TemporaryFile::TemporaryFile</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classString.html">String</a> &amp;&#160;</td>
          <td class="paramname"><em>suffix</em> = <code><a class="el" href="classString.html#afd02116a5571fcc8bc1e6fdabe132a85">String::empty</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optionFlags</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a randomly-named temporary file in the default temp directory. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">suffix</td><td>a file suffix to use for the file </td></tr>
    <tr><td class="paramname">optionFlags</td><td>a combination of the values listed in the OptionFlags enum The file will not be created until you write to it. And remember that when this object is deleted, the file will also be deleted! </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7039b78139b7d1c0661a4e1307929127"></a><!-- doxytag: member="TemporaryFile::TemporaryFile" ref="a7039b78139b7d1c0661a4e1307929127" args="(const File &amp;targetFile, int optionFlags=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTemporaryFile.html#a4f70f8859f286ba4c934c6a06e4e9f09">TemporaryFile::TemporaryFile</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFile.html">File</a> &amp;&#160;</td>
          <td class="paramname"><em>targetFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optionFlags</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a temporary file in the same directory as a specified file. </p>
<p>This is useful if you have a file that you want to overwrite, but don't want to harm the original file if the write operation fails. You can use this to create a temporary file next to the target file, then write to the temporary file, and finally use <a class="el" href="classTemporaryFile.html#aaf1c2513c6bd7b1ba343fe53cddd0fd0" title="Tries to move the temporary file to overwrite the target file that was specified in the constructor...">overwriteTargetFileWithTemporary()</a> to replace the target file with the one you've just written.</p>
<p>This class won't create any files until you actually write to them. And remember that when this object is deleted, the temporary file will also be deleted!</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">targetFile</td><td>the file that you intend to overwrite - the temporary file will be created in the same directory as this </td></tr>
    <tr><td class="paramname">optionFlags</td><td>a combination of the values listed in the OptionFlags enum </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7a0f828343c95d3a7e81d6d3587ad116"></a><!-- doxytag: member="TemporaryFile::~TemporaryFile" ref="a7a0f828343c95d3a7e81d6d3587ad116" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTemporaryFile.html#a7a0f828343c95d3a7e81d6d3587ad116">TemporaryFile::~TemporaryFile</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destructor. </p>
<p>When this object is deleted it will make sure that its temporary file is also deleted! If the operation fails, it'll throw an assertion in debug mode. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1a572896153a2dda306100603e039454"></a><!-- doxytag: member="TemporaryFile::getFile" ref="a1a572896153a2dda306100603e039454" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classFile.html">File</a>&amp; <a class="el" href="classTemporaryFile.html#a1a572896153a2dda306100603e039454">TemporaryFile::getFile</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the temporary file. </p>

</div>
</div>
<a class="anchor" id="ae3c0550e3bf9fadc2964c44239563ab8"></a><!-- doxytag: member="TemporaryFile::getTargetFile" ref="ae3c0550e3bf9fadc2964c44239563ab8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classFile.html">File</a>&amp; <a class="el" href="classTemporaryFile.html#ae3c0550e3bf9fadc2964c44239563ab8">TemporaryFile::getTargetFile</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the target file that was specified in the constructor. </p>

</div>
</div>
<a class="anchor" id="aaf1c2513c6bd7b1ba343fe53cddd0fd0"></a><!-- doxytag: member="TemporaryFile::overwriteTargetFileWithTemporary" ref="aaf1c2513c6bd7b1ba343fe53cddd0fd0" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTemporaryFile.html#aaf1c2513c6bd7b1ba343fe53cddd0fd0">TemporaryFile::overwriteTargetFileWithTemporary</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tries to move the temporary file to overwrite the target file that was specified in the constructor. </p>
<p>If you used the constructor that specified a target file, this will attempt to replace that file with the temporary one.</p>
<p>Before calling this, make sure:</p>
<ul>
<li>that you've actually written to the temporary file</li>
<li>that you've closed any open streams that you were using to write to it</li>
<li>and that you don't have any streams open to the target file, which would prevent it being overwritten</li>
</ul>
<p>If the file move succeeds, this returns false, and the temporary file will have disappeared. If it fails, the temporary file will probably still exist, but will be deleted when this object is destroyed. </p>

</div>
</div>
<a class="anchor" id="a3a79444415eba12ba52fb9dc86d126a0"></a><!-- doxytag: member="TemporaryFile::deleteTemporaryFile" ref="a3a79444415eba12ba52fb9dc86d126a0" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTemporaryFile.html#a3a79444415eba12ba52fb9dc86d126a0">TemporaryFile::deleteTemporaryFile</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempts to delete the temporary file, if it exists. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the file is successfully deleted (or if it didn't exist). </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="juce__TemporaryFile_8h.html">juce_TemporaryFile.h</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/>
<address class="footer"><small>All content &copy Raw Material Software Ltd.</small></address><br/>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-19759318-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
</html>
